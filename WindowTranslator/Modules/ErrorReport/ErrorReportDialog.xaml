<ui:FluentWindow
    x:Class="WindowTranslator.Modules.ErrorReport.ErrorReportDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:WindowTranslator.Modules.ErrorReport"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:properties="clr-namespace:WindowTranslator.Properties"
    xmlns:root="clr-namespace:WindowTranslator"
    xmlns:sentry="clr-namespace:Sentry;assembly=Sentry"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="{Binding Title, Source={x:Static root:AppInfo.Instance}}"
    Width="600"
    Height="450"
    d:DataContext="{d:DesignInstance {x:Type local:ErrorReportViewModel}}"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ExtendsContentIntoTitleBar="True"
    WindowBackdropType="Mica"
    WindowCornerPreference="Default"
    mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <ui:TitleBar
            Title="{Binding Title, Source={x:Static root:AppInfo.Instance}}"
            Grid.Row="0"
            Grid.ColumnSpan="2"
            ShowMaximize="False"
            ShowMinimize="False">
            <ui:TitleBar.Icon>
                <ui:ImageIcon Source="/wt.ico" />
            </ui:TitleBar.Icon>
        </ui:TitleBar>
        <ui:SymbolIcon
            Grid.Row="1"
            Filled="True"
            FontSize="120"
            Foreground="Orange"
            Symbol="Warning28" />
        <ui:SymbolIcon
            Grid.Row="1"
            FontSize="120"
            Foreground="Black"
            Symbol="Warning28" />
        <ui:TextBlock
            Grid.Row="1"
            Grid.Column="1"
            VerticalAlignment="Center"
            FontSize="24"
            Text="{Binding Message, Mode=OneWay}"
            TextWrapping="Wrap" />
        <ui:TextBox
            Grid.Row="2"
            Grid.ColumnSpan="2"
            Margin="4"
            FontFamily="Consolas"
            HorizontalScrollBarVisibility="Hidden"
            IsReadOnly="True"
            IsReadOnlyCaretVisible="False"
            Text="{Binding Info, Mode=OneWay}"
            VerticalScrollBarVisibility="Visible" />
        <StackPanel
            Grid.Row="3"
            Grid.ColumnSpan="2"
            Margin="8"
            HorizontalAlignment="Right"
            Orientation="Horizontal">
            <StackPanel.Resources>
                <Style BasedOn="{StaticResource {x:Type ui:Button}}" TargetType="ui:Button">
                    <Setter Property="MinWidth" Value="120" />
                    <Setter Property="Margin" Value="4,0" />
                </Style>
                <BooleanToVisibilityConverter x:Key="b2vConv" />
            </StackPanel.Resources>
            <ui:Flyout
                Content="{x:Static properties:Resources.Copied}"
                IsOpen="{Binding Copied, Mode=OneWay}"
                Placement="Top" />
            <ui:Button
                Command="{Binding CopyCommand}"
                Content="{x:Static properties:Resources.Copy}"
                Icon="{ui:SymbolIcon Symbol=DocumentCopy24}" />
            <ui:Button
                Command="{Binding SendReportCommand}"
                Content="{x:Static properties:Resources.SendRerpot}"
                Icon="{ui:SymbolIcon Symbol=Send24}"
                ToolTip="{x:Static properties:Resources.SendReportToolTip}"
                Visibility="{Binding IsSentryEnabled, Converter={StaticResource b2vConv}}" />
            <ui:Flyout
                Content="{x:Static properties:Resources.Sent}"
                IsOpen="{Binding Sent, Mode=OneWay}"
                Placement="Top" />
            <ui:Button Content="閉じる" IsCancel="True" />
        </StackPanel>
    </Grid>
</ui:FluentWindow>
